# Экономическая модель игры-пресейла

## Концепция

Геймифицированный пресейл токена с механикой майнинга/фарминга. Игроки покупают "устройства" (тарифы), которые генерируют токены. В конце сезона балансы конвертируются в реальные токены по аллокации.

---

## Тарифы (10 тиров)

| Тир | Депозит | Доход | Цикл | Получаешь | Прибыль | %/день |
|-----|---------|-------|------|-----------|---------|--------|
| 1 | $10 | 135% | 7 дней | $13.50 | $3.50 | 5% |
| 2 | $30 | 150% | 10 дней | $45 | $15 | 5% |
| 3 | $80 | 170% | 14 дней | $136 | $56 | 5% |
| 4 | $220 | 190% | 18 дней | $418 | $198 | 5% |
| 5 | $600 | 210% | 22 дня | $1,260 | $660 | 5% |
| 6 | $1,800 | 235% | 27 дней | $4,230 | $2,430 | 5% |
| 7 | $5,500 | 260% | 32 дня | $14,300 | $8,800 | 5% |
| 8 | $18,000 | 285% | 37 дней | $51,300 | $33,300 | 5% |
| 9 | $60,000 | 310% | 42 дня | $186,000 | $126,000 | 5% |
| 10 | $200,000 | 340% | 48 дней | $680,000 | $480,000 | 5% |

**Примечания:**
- Депозит (тело) сгорает в конце цикла
- Доход капает ежесекундно на баланс
- Нужно собирать доход (иначе достигается кап хранилища)
- Стабильные 5%/день на всех тирах

---

## Breakeven по тирам

| Тир | Депозит | BE (дней) | % цикла |
|-----|---------|-----------|---------|
| 1 | $10 | 4.7 | 67% |
| 2 | $30 | 6.7 | 67% |
| 3 | $80 | 9.3 | 67% |
| 4 | $220 | 12.0 | 67% |
| 5 | $600 | 14.7 | 67% |
| 6 | $1,800 | 18.0 | 67% |
| 7 | $5,500 | 21.3 | 67% |
| 8 | $18,000 | 24.7 | 67% |
| 9 | $60,000 | 28.0 | 67% |
| 10 | $200,000 | 32.0 | 67% |

---

## Комиссия на досрочный вывод тела

Привязана к достижению точки безубыточности (BE), а не к циклу. После BE тело становится невыводным и работает до конца цикла.

| % пути до BE | Комиссия на тело | Логика |
|--------------|------------------|--------|
| 0-20% | 20% | Только зашёл, почти всё вернёшь |
| 20-40% | 35% | Часть дохода уже получил |
| 40-60% | 55% | Половина пути до BE |
| 60-80% | 75% | Почти отбил |
| 80-99% | 90% | Вот-вот BE |
| 100%+ (после BE) | 100% | Тело невыводное, работает до сгорания |

**Напоминание:** BE наступает на 67% цикла для всех тиров.

### Пример: Тир 1 (депозит $10, цикл 7 дней, BE = день 4.7)

| День | % до BE | Комиссия | Вернёшь тела | Накопил дохода | Итого на руки |
|------|---------|----------|--------------|----------------|---------------|
| 1 | 21% | 35% | $6.50 | $1.93 | $8.43 |
| 2 | 43% | 55% | $4.50 | $3.86 | $8.36 |
| 3 | 64% | 75% | $2.50 | $5.79 | $8.29 |
| 4 | 85% | 90% | $1.00 | $7.71 | $8.71 |
| 4.7+ | 100% | 100% | $0 | — | только доход |
| 7 (конец) | — | — | $0 | $13.50 | $13.50 |

### Пример: Тир 5 (депозит $600, цикл 22 дня, BE = день 14.7)

| День | % до BE | Комиссия | Вернёшь тела | Накопил дохода | Итого |
|------|---------|----------|--------------|----------------|-------|
| 2 | 14% | 20% | $480 | $114 | $594 |
| 5 | 34% | 35% | $390 | $286 | $676 |
| 8 | 54% | 55% | $270 | $457 | $727 |
| 11 | 75% | 75% | $150 | $629 | $779 |
| 14 | 95% | 90% | $60 | $800 | $860 |
| 14.7+ | 100% | 100% | $0 | — | только доход |
| 22 (конец) | — | — | $0 | $1,260 | $1,260 |

### Вывод: выходить до BE невыгодно

| Момент выхода (Тир 1) | Получишь | vs дождаться конца |
|-----------------------|----------|-------------------|
| День 1 | ~$8.40 | -38% |
| День 4 | ~$8.70 | -35% |
| Конец цикла | $13.50 | 100% |

**Мотивация:** держи до конца или теряй.

---

## Продажа автоматов (Аукцион и Ломбард)

Два способа продать автомат досрочно:

### Аукцион (P2P продажа через очередь)

**Механика:**
- Продавец выставляет автомат в очередь на продажу
- Когда любой игрок покупает автомат этого тира в магазине:
  - Покупатель получает **новый** автомат (0% износа) + апгрейды продавца
  - Продавец получает деньги за вычетом комиссии
- Очередь работает по FIFO (первый выставил — первый продал)

**Комиссия аукциона (от износа):**

| Износ | Комиссия | Получишь (Tier 1, $10) |
|-------|----------|------------------------|
| 0-20% | 10% | $9.00 |
| 20-40% | 20% | $8.00 |
| 40-60% | 35% | $6.50 |
| 60-80% | 55% | $4.50 |
| 80-100% | 75% | $2.50 |

**Формула:**
```
Получаешь = P × (1 - комиссия_износа)
Профит остаётся у тебя
```

**Важно:** Аукцион доступен **всегда**, даже после BE. Это единственный способ выйти после BE.

---

### Ломбард (мгновенная продажа системе)

**Механика:**
- Система выкупает автомат мгновенно
- Забирает весь накопленный профит + комиссия 10%

**Формула:**
```
Получаешь = P × 0.9 - собранный_профит
Итого на руках = собранный_профит + (P × 0.9 - собранный_профит) = P × 0.9
```

**Результат:** всегда выходишь с **-10%** от вложений, независимо от момента продажи.

| Собрал профит | Получишь за автомат | Итого на руках |
|---------------|---------------------|----------------|
| $0 | $9.00 | $9.00 (-10%) |
| $3 | $6.00 | $9.00 (-10%) |
| $6 | $3.00 | $9.00 (-10%) |
| $9+ | — | НЕДОСТУПЕН |

**Важно:** Ломбард **недоступен после BE** (когда профит превысит 90% тела).

---

### Сравнение способов продажи (Tier 1, $10)

| Износ | Собрал | Ломбард (итого) | Аукцион (итого) | Выгоднее |
|-------|--------|-----------------|-----------------|----------|
| 20% | $2 | $9.00 (-10%) | $10.00 (0%) | Аукцион +$1 |
| 50% | $5 | $9.00 (-10%) | $11.50 (+15%) | Аукцион +$2.50 |
| 80% | $8 | $9.00 (-10%) | $12.50 (+25%) | Аукцион +$3.50 |
| 100% (BE) | $10+ | ❌ НЕДОСТУПЕН | $12.50+ | Только аукцион |

**Вывод:**
- **Ломбард** = мгновенно, но всегда -10% от вложений
- **Аукцион** = нужно ждать покупателя, но выгоднее (особенно при высоком износе)

---

## Комиссия на вывод прибыли (в USDT)

Зависит от максимального достигнутого тира. Мотивация апгрейдиться.

| Макс тир | Комиссия на прибыль |
|----------|---------------------|
| 1 | 50% |
| 2 | 45% |
| 3 | 40% |
| 4 | 35% |
| 5 | 30% |
| 6 | 25% |
| 7 | 20% |
| 8 | 15% |
| 9 | 12% |
| 10 | 10% |

**Важно:** Комиссия применяется только при выводе в USDT. Внутри системы (реинвест, апгрейд) — без комиссии.

---

## Порядок выплат: сначала прибыль, потом тело

Доход с тарифа выплачивается в определённом порядке:

```
День 1 ──────────────────────────────────────► Конец цикла
[======= ПРИБЫЛЬ (с комиссией) =======][======= ТЕЛО (0%) =======]
```

1. **Сначала капает прибыль** — облагается комиссией тира
2. **Потом капает тело** — без комиссии (0%)

### Пример: Тир 1 ($10 депозит, 7 дней, доход $13.50)

| Период | Что капает | Сумма | Комиссия | Чистыми |
|--------|------------|-------|----------|---------|
| День 1-1.8 | Прибыль | $3.50 | 50% | $1.75 |
| День 1.8-7 | Тело | $10 | 0% | $10 |
| **Итого** | — | $13.50 | — | **$11.75** |

### Пример: Тир 5 ($600 депозит, 22 дня, доход $1,260)

| Период | Что капает | Сумма | Комиссия | Чистыми |
|--------|------------|-------|----------|---------|
| День 1-11.5 | Прибыль | $660 | 30% | $462 |
| День 11.5-22 | Тело | $600 | 0% | $600 |
| **Итого** | — | $1,260 | — | **$1,062** |

### Досрочный выход стал ещё менее выгодным

**Тир 1, день 2 (накопил $3.86):**

| Компонент | Расчёт | Получаешь |
|-----------|--------|-----------|
| Прибыль накопленная | $3.50 × 50% | $1.75 |
| Тело накопленное | $0.36 × 0% | $0.36 |
| Продажа устройства (55%) | $10 × 45% | $4.50 |
| **Итого** | — | **$6.61** |

---

## ⚠️ КРИТИЧЕСКИ ВАЖНО: Отслеживание источника средств

Система ОБЯЗАТЕЛЬНО должна отслеживать для каждого баланса и тарифа:

### 1. Источник депозита (тела) тарифа

| Тип | Описание | Как учитывать |
|-----|----------|---------------|
| **Чистый депозит** | Пополнение из USDT напрямую | Полностью "своё тело" |
| **Тело из прибыли** | Тариф куплен на прибыль других тарифов | Это уже было обложено комиссией (или будет при выводе) |
| **Смешанный** | Частично USDT + частично прибыль | Отслеживать пропорцию |

### 2. Зачем это нужно

**Сценарий: Игрок на Тире 1 накопил $13.50, купил новый Тир 1 за $10**

Новый тариф куплен на:
- $3.50 — прибыль (уже учтена как прибыль, комиссия ещё не взята)
- $6.50 — часть тела (это "своё")

Когда новый тариф даст доход $13.50:
- Система должна знать что $3.50 из тела — это бывшая прибыль
- При выводе нужно корректно применить комиссию

### 3. Структура данных (пример)

```
Тариф #1234:
├─ tier: 1
├─ total_deposit: $10
├─ deposit_sources:
│   ├─ fresh_usdt: $6.50 (65%) — чистое пополнение
│   └─ from_profit: $3.50 (35%) — из прибыли тарифа #1201
├─ profit_generated: $3.50
├─ body_returned: $0
└─ status: active
```

### 4. Правила применения комиссии

| Источник | При выводе в USDT |
|----------|-------------------|
| Fresh USDT (чистое пополнение) | 0% комиссия |
| Тело из прибыли | Комиссия уже учтена при формировании |
| Новая прибыль | Комиссия по тиру |

### 5. Пример сложного сценария

```
1. Игрок пополнил $10 (чистый USDT) → Тариф 1
2. Получил $13.50 → прибыль $3.50, тело $10
3. Купил новый Тариф 1 за $10:
   - $3.50 из прибыли (комиссия 50% = $1.75 в казну)
   - $6.50 из тела (0%)
4. Остаток на балансе: $3.50
5. Новый тариф даёт $13.50:
   - Прибыль $3.50 → комиссия 50%
   - Тело $10:
     - $6.50 — чистое (0%)
     - $3.50 — из бывшей прибыли (уже обложено на шаге 3)
```

**Без отслеживания источников система либо:**
- Возьмёт комиссию дважды (несправедливо к игроку)
- Не возьмёт комиссию вообще (дыра в экономике)

---

## Урезание прибыли за реинвест

При повторной покупке того же тира прибыль уменьшается. Сбрасывается при апгрейде на новый тир.

**Агрессивная шкала** — мотивирует переходить на следующий тир вместо бесконечного реинвеста.

| Круг на том же тире | Урезание прибыли |
|---------------------|------------------|
| 1 | 0% |
| 2 | 35% |
| 3 | 50% |
| 4 | 60% |
| 5 | 70% |
| 6 | 80% |
| 7+ | 90% (потолок) |

**Пример (Тир 1, база $3.50 прибыли):**
- Круг 1: $3.50
- Круг 2: $2.28 (-35%)
- Круг 3: $1.75 (-50%)
- Круг 4: $1.40 (-60%)
- Круг 7+: $0.35 (-90%)

---

## Апгрейд: доплата для перехода на следующий тир

После 1 цикла + параллельный фарм на остаток:

| Переход | Нужно | Макс накопит | Доплата |
|---------|-------|--------------|---------|
| 1 → 2 | $30 | $13.50 | **$16.50** |
| 2 → 3 | $80 | $58 | **$22** |
| 3 → 4 | $220 | $181 | **$39** |
| 4 → 5 | $600 | $538 | **$62** |
| 5 → 6 | $1,800 | $1,660 | **$140** |
| 6 → 7 | $5,500 | $5,230 | **$270** |
| 7 → 8 | $18,000 | $17,300 | **$700** |
| 8 → 9 | $60,000 | $58,800 | **$1,200** |
| 9 → 10 | $200,000 | $198,000 | **$2,000** |

---

## Сценарии игроков

### F2P (только реинвест, без доплат)
- Старт: $10
- Путь: бесконечные круги на тире 1 с урезанием
- Потолок: застрянет на тире 1-2, очень долго
- Время до тира 3: ~60-80 дней

### Лёгкий донатер
- Старт: $10
- Доплаты: минимальные ($16-40 за апгрейд)
- Реальные вложения до тира 5: ~$150
- Время: ~70 дней

### Средний донатер
- Старт: $80 (тир 3)
- Доплаты: по мере роста
- Реальные вложения до тира 7: ~$900
- Время: ~120 дней

### Активный игрок
- Старт: $600 (тир 5)
- Путь до тира 10
- Реальные вложения: ~$4,900
- Время: ~170 дней

### Кит
- Старт: $200,000 (сразу тир 10)
- Время: 48 дней до выплаты
- ROI: 240% (с учётом комиссии 10%)

---

## Суммарные вложения для достижения тира 10

| Стартовый тир | Свои деньги | Время |
|---------------|-------------|-------|
| Тир 1 (с доплатами) | **$4,460** | ~230 дней |
| Тир 3 | **$4,370** | ~210 дней |
| Тир 5 | **$4,910** | ~170 дней |
| Тир 7 | **$9,400** | ~127 дней |
| Тир 10 (сразу) | **$200,000** | 48 дней |

---

## Механика хранилища (Coin Box)

- У каждого устройства есть монетоприёмник с фиксированным капом
- **Базовый кап: 12 часов** (для всех тиров, бесплатно)
- Если не собрать — фарм останавливается
- Прокачка хранилища отсутствует — простая механика для всех

### Инкассатор (Auto Collect)

Игрок может нанять инкассатора для автоматического сбора монет.

| Параметр | Значение |
|----------|----------|
| Контракт (найм) | **$5** (разовая плата за машину) |
| Зарплата | **5% от каждого сбора** |
| Действие | Автоматически собирает при заполнении |
| Срок | До конца цикла машины |

**Экономика инкассатора:**

| Тир | Прибыль/цикл | 5% зарплата | Всего за цикл |
|-----|--------------|-------------|---------------|
| 1 | $3.50 | $0.18 | $5.18 |
| 3 | $56 | $2.80 | $7.80 |
| 5 | $660 | $33 | $38 |
| 7 | $8,800 | $440 | $445 |
| 10 | $480,000 | $24,000 | $24,005 |

**Вывод:** На низких тирах фиксированные $5 ощутимы (стимул собирать самому). На высоких тирах 5% — основная плата.

---

## Экономика казны

### Притоки
- Депозиты игроков
- Комиссии за вывод тела (20-85%)
- Комиссии за вывод прибыли (10-50%)
- Донат функции

### Оттоки
- Выплаты прибыли при выводе

### Критические метрики для устойчивости
| Метрика | Минимум |
|---------|---------|
| % игроков делающих реинвест | >50% |
| % игроков пополняющих | >20% |
| Средний LTV игрока | >$50 |
| Churn после 1 круга | <50% |

---

## Связь с токеном

1. **Во время игры:** игроки оперируют внутренними токенами (не выпущены)
2. **Курс покупки:** 1 токен = $0.10 USDT (пример)
3. **Курс вывода:** ниже курса покупки (штраф за ранний выход)
4. **Конец сезона:** балансы конвертируются в реальные токены по аллокации
5. **Аллокация:** зависит от импакта игрока (объём, время в системе, активность)

---

## Реферальная система

*Требует отдельной проработки*

Возможные механики:
- % от депозитов рефералов
- % от прибыли рефералов
- Бонусные токены за приглашение
- Уровни рефералки (1-2-3 линии)

---

## TODO

- [ ] Реферальная система — проценты и уровни
- [ ] Конкретные цены апгрейдов
- [ ] UI/UX концепция
- [ ] Дизайн устройств/майнеров
- [ ] Механика сезонов
- [ ] Аллокация токенов — формула расчёта